# Production Environment Configuration
# Data Aggregator Platform

# ==========================================================================
# Application
# ==========================================================================
ENVIRONMENT=production
APP_VERSION=1.0.0
APP_NAME=Data Aggregator Platform
DEBUG=false

# ==========================================================================
# API Configuration
# ==========================================================================
API_HOST=0.0.0.0
API_PORT=8001
API_URL=https://api.dataaggregator.com

# Frontend
FRONTEND_URL=https://dataaggregator.com
NEXT_PUBLIC_API_URL=https://api.dataaggregator.com

# ==========================================================================
# Database - PostgreSQL
# ==========================================================================
POSTGRES_HOST=postgres-production.example.com
POSTGRES_PORT=5432
POSTGRES_DB=dataaggregator_prod
POSTGRES_USER=dataaggregator
POSTGRES_PASSWORD=<CHANGE_ME_STRONG_PASSWORD>

# Database URL
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Connection pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ==========================================================================
# Redis - Cache & Sessions
# ==========================================================================
REDIS_HOST=redis-production.example.com
REDIS_PORT=6379
REDIS_PASSWORD=<CHANGE_ME_REDIS_PASSWORD>
REDIS_DB=0
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Redis connection pool
REDIS_POOL_SIZE=50
REDIS_POOL_TIMEOUT=10

# ==========================================================================
# Security
# ==========================================================================

# JWT Configuration
JWT_SECRET_KEY=<CHANGE_ME_VERY_STRONG_SECRET_KEY_64_CHARS_MIN>
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Session Configuration
SESSION_SECRET=<CHANGE_ME_SESSION_SECRET>
SESSION_TIMEOUT_MINUTES=30

# CORS
ALLOWED_ORIGINS=https://dataaggregator.com,https://www.dataaggregator.com,https://api.dataaggregator.com

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_LOGIN=5
RATE_LIMIT_REGISTER=3
RATE_LIMIT_API=100
RATE_LIMIT_FILE_UPLOAD=10

# ==========================================================================
# File Storage
# ==========================================================================
UPLOAD_DIR=/var/data/dataaggregator/uploads
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_EXTENSIONS=.csv,.json,.xlsx,.xls,.txt,.xml,.parquet,.avro
SCAN_UPLOADED_FILES=true

# AWS S3 (if using S3 for file storage)
AWS_ACCESS_KEY_ID=<CHANGE_ME_AWS_KEY>
AWS_SECRET_ACCESS_KEY=<CHANGE_ME_AWS_SECRET>
AWS_REGION=us-east-1
S3_BUCKET=dataaggregator-prod-files
S3_ENDPOINT=https://s3.amazonaws.com

# ==========================================================================
# Monitoring & Observability
# ==========================================================================

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=<CHANGE_ME_GRAFANA_PASSWORD>

# Sentry
SENTRY_DSN=https://<YOUR_SENTRY_KEY>@sentry.io/<YOUR_PROJECT_ID>
SENTRY_DEV_ENABLED=false
NEXT_PUBLIC_SENTRY_DSN=${SENTRY_DSN}
NEXT_PUBLIC_SENTRY_DEV_ENABLED=false

# Loki
LOKI_URL=http://loki:3100

# ==========================================================================
# Alerting
# ==========================================================================

# Email (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=<CHANGE_ME_SMTP_USERNAME>
SMTP_PASSWORD=<CHANGE_ME_SMTP_PASSWORD>
SMTP_FROM=alerts@dataaggregator.com

# Slack
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/<YOUR_SLACK_WEBHOOK>

# PagerDuty
PAGERDUTY_SERVICE_KEY=<CHANGE_ME_PAGERDUTY_KEY>

# ==========================================================================
# External Services
# ==========================================================================

# OAuth (if needed)
GOOGLE_CLIENT_ID=<CHANGE_ME_GOOGLE_CLIENT_ID>
GOOGLE_CLIENT_SECRET=<CHANGE_ME_GOOGLE_CLIENT_SECRET>

# Third-party APIs
# Add any external API keys here

# ==========================================================================
# Logging
# ==========================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/dataaggregator/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=30

# ==========================================================================
# Performance
# ==========================================================================

# Workers
WORKERS=4
WORKER_TIMEOUT=120
KEEP_ALIVE=5

# Caching
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# ==========================================================================
# Feature Flags
# ==========================================================================
ENABLE_WEBSOCKET=true
ENABLE_FILE_UPLOAD=true
ENABLE_PIPELINE_EXECUTION=true
ENABLE_REAL_TIME_MONITORING=true

# ==========================================================================
# Backup & Recovery
# ==========================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=dataaggregator-prod-backups

# ==========================================================================
# CI/CD
# ==========================================================================
CI_CD_ENABLED=true
DEPLOY_METHOD=blue-green
HEALTH_CHECK_TIMEOUT=60
READINESS_TIMEOUT=120

# ==========================================================================
# SSL/TLS
# ==========================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/dataaggregator.crt
SSL_KEY_PATH=/etc/ssl/private/dataaggregator.key

# ==========================================================================
# Docker Configuration
# ==========================================================================
COMPOSE_PROJECT_NAME=dataaggregator-prod
DOCKER_NETWORK=dataaggregator_network

# ==========================================================================
# Kubernetes (if deploying to K8s)
# ==========================================================================
K8S_NAMESPACE=production
K8S_CLUSTER=dataaggregator-prod
K8S_REPLICAS=3
K8S_RESOURCE_LIMITS_CPU=2
K8S_RESOURCE_LIMITS_MEMORY=4Gi
K8S_RESOURCE_REQUESTS_CPU=1
K8S_RESOURCE_REQUESTS_MEMORY=2Gi

# ==========================================================================
# Database Migrations
# ==========================================================================
AUTO_MIGRATE=false  # Disable auto-migration in production
MIGRATION_TIMEOUT=600

# ==========================================================================
# Security Headers
# ==========================================================================
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000
ENABLE_CSP=true
ENABLE_CORS_CREDENTIALS=true

# ==========================================================================
# Notes
# ==========================================================================
# 1. Replace all <CHANGE_ME_*> placeholders with actual values
# 2. Store sensitive values in a secrets manager (AWS Secrets Manager, Vault, etc.)
# 3. Never commit this file with real credentials to version control
# 4. Use different credentials for each environment
# 5. Rotate secrets regularly (every 90 days recommended)
# 6. Restrict access to this file (chmod 600)
